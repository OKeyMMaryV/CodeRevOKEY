
Процедура ПередЗаписью(Отказ, Замещение)
	
	ПроверитьНаличиеКонтролируемойСтатьи(Отказ);
	
КонецПроцедуры

Процедура ПроверитьНаличиеКонтролируемойСтатьи(Отказ)
	
	Для Каждого ТекСтрока Из ЭтотОбъект Цикл
		Если НЕ ТекСтрока.КонтролирующаяСтатья = ТекСтрока.КонтролируемаяСтатья Тогда  
			СтруктураЗначений = РегистрыСведений.бит_БК_КонтролирующиеСтатьиОборотов.ПолучитьПоследнее(ТекСтрока.Период, Новый Структура("КонтролируемаяСтатья", ТекСтрока.КонтролирующаяСтатья));
			Если СтруктураЗначений.АктивностьСтроки = Истина Тогда 
				бит_ОбщегоНазначенияКлиентСервер.ВывестиСообщение("Статья <"+ТекСтрока.КонтролирующаяСтатья+"> не может быть указана в качестве контролирующей, т.к. на "+Формат(ТекСтрока.Период,"ДФ=dd.MM.yyyy")+ " она является контролируемой", СтатусСообщения.Важное);
				Отказ = Истина;
			КонецЕсли;
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры
