#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда
	
#Область ПрограммныйИнтерфейс

// СтандартныеПодсистемы.ВерсионированиеОбъектов

// Определяет настройки объекта для подсистемы ВерсионированиеОбъектов.
//
// Параметры:
//  Настройки	 - Структура - настройки подсистемы.
Процедура ПриОпределенииНастроекВерсионированияОбъектов(Настройки) Экспорт
КонецПроцедуры

// Конец СтандартныеПодсистемы.ВерсионированиеОбъектов

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

Функция ИнициализироватьКомпоновщик(Настройки) Экспорт

	СКД = Справочники.бит_НастройкиРаспределенияБюджета.ПолучитьМакет("СхемаКомпоновкиДанных");
	НастройкиИзмерений = бит_БюджетированиеПовтИспВызовСервера.НастройкиДополнительныхИзмерений();
	
	бит_МеханизмДопИзмерений.СформироватьЗаголовкиПолейДополнительныхИзмеренийВСКД(СКД, "НаборДанных1", НастройкиИзмерений);
	
	// Настройки (Данные)
	АдресСкдДанные 	 = ПоместитьВоВременноеХранилище(СКД, Новый УникальныйИдентификатор);
	ИсточникНастроек = Новый ИсточникДоступныхНастроекКомпоновкиДанных(АдресСкдДанные);
	
	КомпоновщикДанные = Новый КомпоновщикНастроекКомпоновкиДанных;
	КомпоновщикДанные.Инициализировать(ИсточникНастроек);
	Если ТипЗнч(Настройки) = Тип("НастройкиКомпоновкиДанных") Тогда
		КомпоновщикДанные.ЗагрузитьНастройки(Настройки);
		КомпоновщикДанные.Восстановить();
	Иначе
		КомпоновщикДанные.ЗагрузитьНастройки(СКД.НастройкиПоУмолчанию);
	КонецЕсли;

	// Приведем к поля выбора и структуру к макету справочника.
	ЭлементыВыбор = КомпоновщикДанные.Настройки.Выбор.Элементы;
	ЭлементыВыбор.Очистить();
	Для каждого Элемент Из СКД.НастройкиПоУмолчанию.Выбор.Элементы Цикл
		ЗаполнитьЗначенияСвойств(ЭлементыВыбор.Добавить(ТипЗнч(Элемент)), Элемент);
	КонецЦикла; 
	
	СтруктураОтчета = КомпоновщикДанные.Настройки.Структура;
	СтруктураОтчета.Очистить();
	
	Группировка = СтруктураОтчета.Добавить(Тип("ГруппировкаКомпоновкиДанных"));
	ВыбранноеПоле         		= Группировка.Выбор.Элементы.Добавить(Тип("АвтоВыбранноеПолеКомпоновкиДанных"));
	ВыбранноеПоле.Использование = Истина;
	
	ЭлементПорядка        		 = Группировка.Порядок.Элементы.Добавить(Тип("АвтоЭлементПорядкаКомпоновкиДанных"));
	ЭлементПорядка.Использование = Истина;
	
	Возврат КомпоновщикДанные;
	
КонецФункции

#КонецОбласти 

#КонецЕсли