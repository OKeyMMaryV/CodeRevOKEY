#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли; 	
	
	бит_ук_СлужебныйСервер.РегистрацияНачалоСобытия(Отказ, ДополнительныеСвойства); 	
		
КонецПроцедуры
	
Процедура ПриЗаписи(Отказ)
		
	Если ОбменДанными.Загрузка Тогда
		Возврат;			
	КонецЕсли; 
	
	Если НЕ ПометкаУдаления
		И ЗначениеЗаполнено(СтатьяОборотов) Тогда
		
		Справочники.бит_СтатьиБюджета.СтатьяБюджетаУникальна(Ссылка, Отказ);
		Если НЕ Отказ И НЕ ДополнительныеСвойства.Свойство("ЭтоКопирование") Тогда
			Справочники.бит_Бюджеты.ОбработатьБюджетЗапрещенКПланированию(Владелец);
		КонецЕсли;
	КонецЕсли;
	
	бит_ук_СлужебныйСервер.РегистрацияПриЗаписи(Отказ, ДополнительныеСвойства, Метаданные().ПолноеИмя());
		
КонецПроцедуры

Процедура ПередУдалением(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;			
	КонецЕсли; 
	
	Справочники.бит_Бюджеты.ОбработатьБюджетЗапрещенКПланированию(Владелец, Ссылка);
	
КонецПроцедуры

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	НепроверяемыеРеквизиты = Новый Массив();
	
	Если ЭтоГруппа Тогда
		НепроверяемыеРеквизиты.Добавить("СтатьяОборотов");
	КонецЕсли; 
	
	ОбщегоНазначения.УдалитьНепроверяемыеРеквизитыИзМассива(ПроверяемыеРеквизиты, НепроверяемыеРеквизиты);
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
