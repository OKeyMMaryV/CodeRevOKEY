
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("СписокИмен") Тогда
		
		Элементы.ПолеВводаИмени.СписокВыбора.ЗагрузитьЗначения(Параметры.СписокИмен);
		
	КонецЕсли;
	
	Если Параметры.Свойство("ТекущееИмя") Тогда
		
		ПолеВводаИмени = Параметры.ТекущееИмя;
		
	КонецЕсли;
	
КонецПроцедуры // ПриСозданииНаСервере()

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ПолеВводаИмениПриИзменении(Элемент)
	
	ОбновитьСостояниеФормыПриИзмененииИмени();
	
КонецПроцедуры

&НаКлиенте
Процедура ВидТаблицыПриИзменении(Элемент)
	
	Если ВидТаблицы = 0 Тогда // Табличная часть
		ПолеВводаИмени = СтрЗаменить(СтрЗаменить(ПолеВводаИмени, "$", ""), "()", "");
	ИначеЕсли ВидТаблицы = 1 Тогда // Таблица значений
		ПолеВводаИмени = СтрЗаменить(СтрЗаменить(ПолеВводаИмени, "$", ""), "()", "");
		ПолеВводаИмени = "$" + ПолеВводаИмени;
	Иначе // Выборка
		ПолеВводаИмени = СтрЗаменить(СтрЗаменить(ПолеВводаИмени, "$", ""), "()", "");
		ПолеВводаИмени = "$" + ПолеВводаИмени + "()";
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Выбрать(Команда)
	
	Закрыть(ПолеВводаИмени);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Выполняет закрытие формы выбора имени таблицы и возвращает "Неопределено".
// 
&НаКлиенте
Процедура ЗакрытьФормуВыбора(Команда)
	
	Закрыть(Неопределено);
	
КонецПроцедуры

// Обновляет название таблицы в соответствии с выбранным типом таблицы.
// 
&НаКлиенте
Процедура ОбновитьСостояниеФормыПриИзмененииИмени()
	
	Если Найти(ПолеВводаИмени, "$") <> 0 и Найти(ПолеВводаИмени, "()") <> 0 Тогда // Выборка.
		
		ВидТаблицы = 2;
		
	ИначеЕсли Найти(ПолеВводаИмени, "$") <> 0 Тогда 	// Таблица значений.
		
		ВидТаблицы = 1;
		
	ИначеЕсли Найти(ПолеВводаИмени, "()") <> 0 Тогда 	// Такого не должно быть, необходимо добавить "$" и это выборка.
		
		ПолеВводаИмени = "$" + ПолеВводаИмени;
		ОбновитьСостояниеФормыПриИзмененииИмени();
		
	Иначе
		
		// Табличная часть.
		ВидТаблицы = 0;
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
