
#Область ОбработчикиСобытийФормы
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.НаправлениеПерехода = ТипНаправленияПереходаТабличногоДокумента.БезПерехода Тогда
		 НаправлениеПерехода = 0;
	ИначеЕсли Параметры.НаправлениеПерехода = ТипНаправленияПереходаТабличногоДокумента.ПоСтрокам Тогда
		 НаправлениеПерехода = 1;
	ИначеЕсли Параметры.НаправлениеПерехода = ТипНаправленияПереходаТабличногоДокумента.ПоКолонкам Тогда
		 НаправлениеПерехода = 2;
	КонецЕсли; 
	 
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, ЗавершениеРаботы, ТекстПредупреждения, СтандартнаяОбработка)
	
	Если Модифицированность Тогда
		СтандартнаяОбработка = Ложь;
		Отказ = Истина;
		ОповещениеОЗавершении = Новый ОписаниеОповещения("ПередЗакрытиемЗавершение", ЭтотОбъект); 
		ТекстСообщения = Нстр("ru = 'Настройка изменена. Сохранить изменения?'");
		ПоказатьВопрос(ОповещениеОЗавершении,ТекстСообщения, РежимДиалогаВопрос.ДаНет);
	КонецЕсли; 
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытиемЗавершение(Результат, ДополнительныеПараметры) Экспорт
	
	Модифицированность = Ложь;
	Если Результат = КодВозвратаДиалога.Да Тогда
		ПриЗакрытииФормы();
	Иначе
		Закрыть();
	КонецЕсли; 

КонецПроцедуры // ПередЗакрытиемЗавершение()
 
#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура КомандаГотово(Команда)
	
	Модифицированность = Ложь;
	ПриЗакрытииФормы();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ПриЗакрытииФормы()

	Если НаправлениеПерехода = 0 Тогда
		 ВыбранноеЗначение = ТипНаправленияПереходаТабличногоДокумента.БезПерехода;
	ИначеЕсли НаправлениеПерехода = 1 Тогда
		 ВыбранноеЗначение = ТипНаправленияПереходаТабличногоДокумента.ПоСтрокам;
	ИначеЕсли НаправлениеПерехода = 2 Тогда
		 ВыбранноеЗначение = ТипНаправленияПереходаТабличногоДокумента.ПоКолонкам;
	КонецЕсли; 
	 
	Результат = Новый Структура(); 
	Результат.Вставить("НаправлениеПерехода", ВыбранноеЗначение);
	
	Закрыть(Результат);

КонецПроцедуры // ПриЗакрытииФормы()
 
#КонецОбласти
