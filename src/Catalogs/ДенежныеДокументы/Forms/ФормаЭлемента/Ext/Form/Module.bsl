///////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// СтандартныеПодсистемы.ВерсионированиеОбъектов
	ВерсионированиеОбъектов.ПриСозданииНаСервере(ЭтотОбъект);
	// Конец СтандартныеПодсистемы.ВерсионированиеОбъектов
	
	//ОКЕЙ Завьялова Е.А. (ПервыйБИТ) Начало 2021-02-16 (#НТП_БП05_ФР02)
	ок_МодификацияКонфигурацииПереопределяемый.ПриСозданииНаСервере(ЭтотОбъект,Отказ,СтандартнаяОбработка);
	//ОКЕЙ Завьялова Е.А. (ПервыйБИТ) Конец 2021-02-16 (#НТП_БП05_ФР02)
	
КонецПроцедуры

//ОКЕЙ Завьялова Е.А. (ПервыйБИТ) Начало 2021-02-16 (#НТП_БП05_ФР02)
&НаКлиенте
Процедура Подключаемый_ПодотчетноеЛицоПриИзменении(Элемент)
	
	ок_СформироватьНаименованиеДокумента();
		
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_МаршрутПриИзменении(Элемент)
	
	ок_СформироватьНаименованиеДокумента();
		
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ДатаБилетаПриИзменении(Элемент)
	
	ок_СформироватьНаименованиеДокумента();
		
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_НомерБилетаПриИзменении(Элемент)
	
	ок_СформироватьНаименованиеДокумента();
		
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ВидРасходаПриИзменении(Элемент)
	
	ок_СформироватьНаименованиеДокумента();
		
КонецПроцедуры
//Процедура формирует наименование по шаблону
&НаКлиенте
Процедура ок_СформироватьНаименованиеДокумента()
	// Наименование включает поля
	//«Подотчетное лицо» + «Вид расхода» + «Номер билета» + «Дата билета» + «Маршрут»
	ЧастиПредставления = Новый Массив;
	
	Если ЗначениеЗаполнено(Объект.ок_ПодотчетноеЛицо) Тогда
		ЧастиПредставления.Добавить(Объект.ок_ПодотчетноеЛицо);
	КонецЕсли; 
	
	Если ЗначениеЗаполнено(Объект.ок_ВидРасхода) Тогда
		ЧастиПредставления.Добавить(Объект.ок_ВидРасхода);
	КонецЕсли; 
	Если НЕ ПустаяСтрока(Объект.ок_НомерБилета) Тогда
		ЧастиПредставления.Добавить(Объект.ок_НомерБилета);
	КонецЕсли; 
	Если ЗначениеЗаполнено(Объект.ок_ДатаБилета) Тогда
		ЧастиПредставления.Добавить(Формат(Объект.ок_ДатаБилета, "ДЛФ=D"));
	КонецЕсли; 
	Если НЕ ПустаяСтрока(Объект.ок_Маршрут) Тогда
		ЧастиПредставления.Добавить(Объект.ок_Маршрут);
	КонецЕсли; 
	
	Представление = СтрСоединить(ЧастиПредставления, " ");
		
	Объект.Наименование =  Представление;

КонецПроцедуры
//ОКЕЙ Завьялова Е.А. (ПервыйБИТ) Конец 2021-02-16 (#НТП_БП05_ФР02)
