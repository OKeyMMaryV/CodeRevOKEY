
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// СтандартныеПодсистемы.ВерсионированиеОбъектов
	ВерсионированиеОбъектов.ПриСозданииНаСервере(ЭтотОбъект);
	// Конец СтандартныеПодсистемы.ВерсионированиеОбъектов
	
	// Стандартные действия при создании на сервере.
	бит_РаботаСДиалогамиСервер.СписокПриСозданииНаСервере(Отказ, СтандартнаяОбработка, ЭтаФорма);	
	
	флЕстьПрава = РольДоступна(Метаданные.Роли.ПолныеПрава) ИЛИ РольДоступна(Метаданные.Роли.бит_ФинансистПолныеПрава);
	
	Элементы.ФормаГруппаЗаполнить.Видимость = флЕстьПрава;
	
КонецПроцедуры // ПриСозданииНаСервере()

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура КомандаЗаполнить(Команда)
	
	ТекстВопроса =  НСтр("ru = 'Будет выполнено заполнение виз по умолчанию. Продолжить?'");
	Оповещение = Новый ОписаниеОповещения("КомандаЗаполнитьОкончание", ЭтотОбъект);
	ПоказатьВопрос(Оповещение, ТекстВопроса, РежимДиалогаВопрос.ДаНет, 30, КодВозвратаДиалога.Нет);
	
КонецПроцедуры

// Процедура окончание процедуры "КомандаЗаполнить".
// 
&НаКлиенте 
Процедура КомандаЗаполнитьОкончание(Ответ, ДополнительныеДанные) Экспорт
	
	Если Ответ = КодВозвратаДиалога.Да Тогда
		ЗаполнитьВизы(Ложь);
	КонецЕсли;
                
КонецПроцедуры // КомандаЗаполнитьОкончание()

&НаКлиенте
Процедура КомандаЗаполнитьНазначить(Команда)
	
	ТекстВопроса =  НСтр("ru = 'Будет выполнено заполнение и назначение виз по умолчанию. Продолжить?'");
	Оповещение = Новый ОписаниеОповещения("КомандаЗаполнитьНазначитьОкончание", ЭтотОбъект);
	ПоказатьВопрос(Оповещение, ТекстВопроса, РежимДиалогаВопрос.ДаНет, 30, КодВозвратаДиалога.Нет);
	
КонецПроцедуры

// Процедура окончание процедуры "КомандаЗаполнитьНазначить".
// 
&НаКлиенте 
Процедура КомандаЗаполнитьНазначитьОкончание(Ответ, ДополнительныеДанные) Экспорт
	
	Если Ответ = КодВозвратаДиалога.Да Тогда
		ЗаполнитьВизы(Истина);
	КонецЕсли; 
                
КонецПроцедуры // КомандаЗаполнитьНазначитьОкончание()

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Процедура заполняет и назначает перечень виз по-умолчанию.
// 
// Параметры:
//  Назначать - Булево.
// 
&НаСервере
Процедура ЗаполнитьВизы(Назначать)
	
	// Создадим визы.
	бит_Визирование.СоздатьИНазначитьВизы(Назначать, Истина, Истина);
	
КонецПроцедуры // ЗаполнитьВизы()

#КонецОбласти

