
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ВариантОтбораВиз = Параметры.ВариантОтбораВиз;
	ФильтрВизы       = Параметры.ФильтрВизы;
	
	УстановитьВидимость();
	
	МассивТипов = Новый Массив;
	МассивТипов.Добавить(Тип("СправочникСсылка.бит_Визы"));
	ДопустимыйТип = Новый ОписаниеТипов(МассивТипов);
	ФильтрВизы.ТипЗначения = ДопустимыйТип;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ВариантОтбораВизПриИзменении(Элемент)
	
	УстановитьВидимость();
	
КонецПроцедуры

&НаКлиенте
Процедура УстановитьФильтр(Команда)
	
	Если ВариантОтбораВиз = 3
		И ФильтрВизы.Количество() = 0 Тогда
		ТекстСообщения = НСтр("ru = 'Не выбрано ни одной визы для фильтра.'");
		ОбщегоНазначенияКлиент.СообщитьПользователю(ТекстСообщения,,"ФильтрВизыЗначение");
		Возврат;
	КонецЕсли;
	
	РезультатВыбора = Новый Структура;
	РезультатВыбора.Вставить("ВариантОтбораВиз", ВариантОтбораВиз);
	РезультатВыбора.Вставить("ФильтрВизы", ФильтрВизы);
	Закрыть(РезультатВыбора);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УстановитьВидимость()
	
	Элементы.ФильтрВизы.Видимость = (ВариантОтбораВиз = 3);
	
КонецПроцедуры


#КонецОбласти
