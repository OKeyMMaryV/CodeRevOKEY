
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Стандартные действия при создании на сервере.
	бит_РаботаСДиалогамиСервер.ФормаПриСозданииНаСервере(Отказ, СтандартнаяОбработка, ЭтаФорма, Объект);

	ЭтоСемействоЕРП = бит_ОбщегоНазначения.ЭтоСемействоERP();
	
	ПодключитьСхемы(ЭтоСемействоЕРП);
	
	УправлениеВидимостьюЭлементов(ЭтоСемействоЕРП);
			
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура СхемаБюджетированиеВыбор(Элемент)
	
	ИмяЭлемента = Элемент.ТекущийЭлемент.Имя;
	бит_РаботаСДиалогамиКлиент.ОткрытьФормуПоИмени(ИмяЭлемента, Новый Структура("ПреобразоватьИзИмени",Истина));
	
КонецПроцедуры

&НаКлиенте
Процедура СхемаБюджетированиеБалансовыйУчетВыбор(Элемент)
	
	ИмяЭлемента = Элемент.ТекущийЭлемент.Имя;
	бит_РаботаСДиалогамиКлиент.ОткрытьФормуПоИмени(ИмяЭлемента, Новый Структура("ПреобразоватьИзИмени",Истина));
	
КонецПроцедуры

&НаКлиенте
Процедура ДекорацияНажание(Элемент)
	
	ИмяЭлемента = Элемент.Имя;
	// Для дублирующихся элементов убираем номер из имени.
	ИмяЭлемента = СтрЗаменить(ИмяЭлемента, "_Форма1","_Форма");
	бит_РаботаСДиалогамиКлиент.ОткрытьФормуПоИмени(ИмяЭлемента, Новый Структура("ПреобразоватьИзИмени",Истина));
	
КонецПроцедуры	

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Процедура управляет видимостью элементов формы.
// 
// Параметры:
//  ЭтоСемействоЕРП - Булево
//
&НаСервере
Процедура УправлениеВидимостьюЭлементов(ЭтоСемействоЕРП)
	
	// Видимость некоторых элементов в зависимости от вида решения.
	ДоступнаПроф = бит_ЛицензированиеБФCервер.СборкаДоступна("ПРОФ");
	Элементы.Отчет_битchr95ОтчетПоБюджетуchr95ОстаткиПоСчетам_Форма.Видимость 			  = ДоступнаПроф;
	Элементы.Отчет_битchr95ПланФактныйАнализПоБюджетуchr95ОстаткиПоСчетам_Форма.Видимость = ДоступнаПроф;
	Элементы.Отчет_битchr95ОтчетПоБюджету_Форма.Видимость 								  = НЕ ДоступнаПроф;
	Элементы.Отчет_битchr95ПланФактныйАнализПоБюджету_Форма.Видимость 					  = НЕ ДоступнаПроф;
	
	Если ЭтоСемействоЕРП Тогда
		
		Элементы.РегистрСведений_битchr95СтатьиОборотовchr95СтатьиРегл_ФормаСписка.Видимость  		   = Ложь;
		Элементы.РегистрСведений_битchr95ЦФОchr95Подразделения_ФормаСписка.Видимость 				   = Ложь;
		Элементы.РегистрСведений_битchr95СтатьиОборотовchr95НоменклатурныеГруппы_ФормаСписка.Видимость = Ложь;
		Элементы.Обработка_битchr95РабочееМестоОперативногоПланированияДДС_Форма.Видимость 			   = Ложь;
		Элементы.Отчет_битchr95СверкаВГОchr95ОборотыПоБюджетам_Форма.Видимость 			   			   = Ложь;
		Элементы.Отчет_битchr95СоответствиеАналитикФикс_Форма.Видимость 			   				   = Ложь;
		Элементы.Отчет_битchr95ОборотыМеждуСубконтоchr95Бюджетирование_Форма.Видимость 			   	   = Ложь;
		
	КонецЕсли;
	
	Если Метаданные.РегистрыСведений.Найти("бит_МаскиКодов") = Неопределено Тогда
		Элементы.РегистрСведений_битchr95МаскиКодов_ФормаСписка.Видимость = Ложь;	
	КонецЕсли;
	Если Метаданные.РегистрыСведений.Найти("бит_МаскиКодовПлановСчетов") = Неопределено Тогда
		Элементы.РегистрСведений_битchr95МаскиКодовПлановСчетов_ФормаСписка.Видимость = Ложь;	
	КонецЕсли;
	
КонецПроцедуры // УправлениеВидимостьюЭлементов()

// Процедура подключает макеты-схемы.
// 
// Параметры:
//  ЭтоСемействоЕРП - Булево
//
&НаСервере
Процедура ПодключитьСхемы(ЭтоСемействоЕРП)
	
	ИмяСхемыБюджетирования = ?(ЭтоСемействоЕРП, "СхемаБюджетирование_ЕРП", "СхемаБюджетирование");
		
	// Устанавливаем графические схемы
	СхемаБюджетирование 			  = Обработки.бит_ПанельФункций_Бюджетирование.ПолучитьМакет(ИмяСхемыБюджетирования);
	СхемаБюджетированиеБалансовыйУчет = Обработки.бит_ПанельФункций_Бюджетирование.ПолучитьМакет("СхемаБюджетированиеБалансовыйУчет");

	
КонецПроцедуры// ПодключитьСхемы()

#КонецОбласти
