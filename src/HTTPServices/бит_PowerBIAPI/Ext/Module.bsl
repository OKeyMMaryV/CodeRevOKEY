#Область ОбработчикиСобытий

Функция БанковскиеСчетаGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьБанковскиеСчета(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ВалютыGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьВалюты(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ВидыЦФОGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьВидыЦФО(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ДоговорыКонтрагентовGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьДоговорыКонтрагентов(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция КонтрагентыGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьКонтрагентов(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция НоменклатурынеГруппыGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьНоменклатурынеГруппы(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ОборотыПоБюджетамGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьОборотыПоБюджетам(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ПроектыGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьПроекты(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция СтатьиОборотовGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьСтатьиОборотов(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция СценарииБюджетированияGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьСценарииБюджетирования(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ЦФОGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьЦФО(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ОстаткиДСGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьОстаткиДС(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ВалютыУчетаGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьВалютыУчета(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ЗадолженностьДТGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьЗадолженностьДТ(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ЗадолженностьКТGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьЗадолженностьКТ(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

Функция ОрганизацииGET(Запрос)
	
	Если НЕ ПолучитьФункциональнуюОпцию("бит_ИспользоватьPowerBI") Тогда
		Возврат Ответ();
	КонецЕсли;
	
	// Доступ к данным регулируется правом доступа к методу веб-сервиса.
	// Если у пользователя есть право на вызов веб-сервиса, то он получит все данные
	// без учета прав на эти данные.
	// Такая реализация необходима из-за того, что веб-сервис могут вызывать служебные пользователи:
	// для них назначать доступ к данным не получится из-за отстуствия профиля и невозможности настроить РЛС.
	УстановитьПривилегированныйРежим(Истина);
	ПубликуемыеДанные = бит_PowerBIПереопределяемый.ПолучитьОрганизации(Запрос);
	УстановитьПривилегированныйРежим(Ложь);
	
	Возврат Ответ(ПубликуемыеДанные);
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция Ответ(ДанныеJSON = Неопределено)
	
	Если ДанныеJSON = Неопределено Тогда
		Ответ = Новый HTTPСервисОтвет(405);
	Иначе	
		Ответ = Новый HTTPСервисОтвет(200);
		Ответ.Заголовки.Вставить("Accept-Charset", "utf-8");
		Ответ.Заголовки.Вставить("Content-Type", "application/json;charset=utf-8");
		Ответ.Заголовки["Cache-Control"] = "no-cache";
		Ответ.УстановитьТелоИзСтроки(ДанныеJSON);
	КонецЕсли;
	
	Возврат Ответ;
	
КонецФункции

#КонецОбласти